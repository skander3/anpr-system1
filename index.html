<!DOCTYPE html>
<html>
<head>
    <script>
// VÃ©rifier mot de passe
function checkPassword() {
    const password = prompt("Entrez le mot de passe admin:");
    if (password === "skander123") {
        document.getElementById("admin-interface").style.display = "block";
    } else {
        alert("AccÃ¨s refusÃ©");
        window.location.href = "about:blank";
    }
}
// Appeler au chargement
checkPassword();
</script>
    <title>Ø¥Ø¯Ø§Ø±Ø© Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</title>
    <meta charset="utf-8">
    <style>
        body {
      background-color: #e7eddffe; /* ØºÙŠÙ‘Ø± Ù‡ÙˆÙ†ÙŠ Ù„Ù„ÙˆÙ† Ø§Ù„Ù„ÙŠ ØªØ­Ø¨ (hex) */
      color: rgb(22, 1, 1);              /* Ù„ÙˆÙ† Ø§Ù„Ù†Øµ Ø§Ù„Ø¹Ø§Ù… ÙÙŠ Ø§Ù„ØµÙØ­Ø© */
      font-family: Arial, sans-serif;
    }
        .section { border: 1px solid #160202; padding: 20px; margin: 20px 0; }
        input, button { padding: 8px; margin: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: right; }
        th { background-color: #eaf5f2; }
        .delete { color: rgb(162, 81, 81); cursor: pointer; }
    </style>
</head>
<body>
    <h1>ğŸš— Ø¥Ø¯Ø§Ø±Ø© Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ù„Ù‡Ø§</h1>

    <!-- Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
    <div class="section" style="background-color: #abe5ed;">
        <h2>â• Ø¥Ø¶Ø§ÙØ© Ù„ÙˆØ­Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
        <input type="text" id="plateNumber" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø© (Ù…Ø«Ø§Ù„: 154 Tunis 1234)" style="width: 300px;">
        <input type="text" id="ownerName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ" style="width: 200px;">
        <button onclick="addPlate()">Ø¥Ø¶Ø§ÙØ©</button>
    </div>

    <!-- Ù‚Ø³Ù… Ø§Ù„Ø¹Ø±Ø¶ -->
    <div class="section" style="background-color: #abe5ed;">
        <h2>ğŸ“‹ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</h2>
        <table id="platesTable">
            <thead>
                <tr>
                    <th>Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©</th>
                    <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ</th>
                    <th>Ø­Ø°Ù</th>
                </tr>
            </thead>
            <tbody id="platesBody">
                <!-- Ù‡Ù†Ø§ ØªØ¸Ù‡Ø± Ø§Ù„Ù„ÙˆØ­Ø§Øª -->
            </tbody>
        </table>
    </div>

    <script>
        // Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©
        function getPlates() {
            const plates = localStorage.getItem('carPlates');
            return plates ? JSON.parse(plates) : [];
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø­ÙØ¸ Ø§Ù„Ù„ÙˆØ­Ø§Øª ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©
        function savePlates(plates) {
            localStorage.setItem('carPlates', JSON.stringify(plates));
        }

        // Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© Ù„ÙˆØ­Ø© Ø¬Ø¯ÙŠØ¯Ø©
        function addPlate() {
            const plateNumber = document.getElementById('plateNumber').value;
            const ownerName = document.getElementById('ownerName').value;

            if (!plateNumber) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©');
                return;
            }

            const plates = getPlates();
            plates.push({
                plate_number: plateNumber,
                owner_name: ownerName,
                date_added: new Date().toLocaleDateString('ar-TN')
            });

            savePlates(plates);
            displayPlates();
            
            // Ø¥ÙØ±Ø§Øº Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
            document.getElementById('plateNumber').value = '';
            document.getElementById('ownerName').value = '';
            
            alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„ÙˆØ­Ø© Ø¨Ù†Ø¬Ø§Ø­!');
        }

        // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù„ÙˆØ­Ø§Øª
        function displayPlates() {
            const plates = getPlates();
            const platesBody = document.getElementById('platesBody');
            
            platesBody.innerHTML = '';

            if (plates.length === 0) {
                platesBody.innerHTML = '<tr><td colspan="3" style="text-align: center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù„ÙˆØ­Ø§Øª Ù…Ø³Ø¬Ù„Ø©</td></tr>';
                return;
            }

            plates.forEach((plate, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${plate.plate_number}</td>
                    <td>${plate.owner_name || '-'}</td>
                    <td><span class="delete" onclick="deletePlate(${index})">ğŸ—‘ï¸ Ø­Ø°Ù</span></td>
                `;
                platesBody.appendChild(row);
            });
        }

        // Ø¯Ø§Ù„Ø© Ø­Ø°Ù Ù„ÙˆØ­Ø©
        function deletePlate(index) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ')) {
                const plates = getPlates();
                plates.splice(index, 1);
                savePlates(plates);
                displayPlates();
                alert('ØªÙ… Ø§Ù„Ø­Ø°Ù Ø¨Ù†Ø¬Ø§Ø­!');
            }
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        displayPlates();
    </script>

    <!-- Ù‚Ø³Ù… Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ ESP32 -->
    <div class="section" style="background-color: #abe5ed;">
        <h2>ğŸ”§ Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
        <p>Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…ØŒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù„ÙˆØ­Ø© Ù„ØªØ±Ù‰ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø³Ø¬Ù„Ø©:</p>
        <input type="text" id="testPlate" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù„ÙˆØ­Ø© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±" style="width: 300px;">
        <button onclick="testPlate()">ÙØ­Øµ Ø§Ù„Ù„ÙˆØ­Ø©</button>
        <p id="testResult" style="margin-top: 10px; font-weight: bold;"></p>
    </div>

    <script>
        // Ø¯Ø§Ù„Ø© ÙØ­Øµ Ø§Ù„Ù„ÙˆØ­Ø© (Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ø¹Ù…Ù„ ESP32)
        function testPlate() {
            const testPlate = document.getElementById('testPlate').value;
            const plates = getPlates();
            const resultElement = document.getElementById('testResult');
            
            const found = plates.find(plate => plate.plate_number === testPlate);
            
            if (found) {
                resultElement.innerHTML = `âœ… Ù…Ø³Ù…ÙˆØ­ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„ - Ù…Ø§Ù„Ùƒ Ø§Ù„Ø³ÙŠØ§Ø±Ø©: ${found.owner_name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}`;
                resultElement.style.color = 'green';
            } else {
                resultElement.innerHTML = 'âŒ Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Ø§Ù„Ù„ÙˆØ­Ø© ØºÙŠØ± Ù…Ø³Ø¬Ù„Ø©';
                resultElement.style.color = 'red';
            }
        }
    </script>
</body>

</html>
